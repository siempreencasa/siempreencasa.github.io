!function(){function e(e){return"object"==typeof e.detail&&"string"==typeof e.detail.name&&"string"==typeof e.detail.event&&"number"==typeof e.detail.ts?!0:(console.error("Invalid UnbounceUITimingEvent",e),!1)}function n(e,n){var t=new CustomEvent("UnbounceUITimingEvent",{detail:{name:e,event:n,ts:(new Date).getTime()}});window.dispatchEvent(t)}function t(){var e=document.querySelector("meta[name=csrf-token]");return e&&e.getAttribute("content")||""}function i(e,n,t){return{metric:"ui.loading."+e,ms:t,tags:["ui:"+n]}}function a(e,n){var t=window.ubSentryHubs&&window.ubSentryHubs["lp-webapp"];t&&t.withScope(function(i){i.setExtras(n),t.captureMessage(e)})}function o(e){var t=document.createElement("script"),i=new Promise(function(i){t.async=!0,t.defer=!0,t.onload=function(){i(e)},document.head.appendChild(t),t.src=e.js,n(e.name,"bundleRequested")});if(e.css&&"string"==typeof e.css&&"data:text/css"!==e.css){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=e.css,document.head.appendChild(a)}return i.then(d),i}function d(e){n(e.name,"bundleLoaded");var t=window[e.name];return"function"!=typeof t?(console.error('Missing UI init function: window["'+e.name+'"]',t),void 0):(e.initialize=function(i){n(e.name,"initializationStarted");var a=t(e.context,e.containers,e.env,i);return new Promise(function(t){var i=a instanceof Promise?a:Promise.resolve();return i.then(function(){n(e.name,"initializationFinished"),t(e)})})},e.deferInitialize||("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e.initialize):e.initialize()),void 0)}var r={},s=[],u={},c=5e3,l=6e4;setInterval(function(){if(s.length>0){var e=JSON.stringify({timings:s});s=[],fetch("/metrics",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":t()},body:e})}},500),window.addEventListener("UnbounceUITimingEvent",function(n){if(e(n)){var t,o=n.detail.name,d=r[o]=r[o]||{};if(!d[n.detail.event])switch(d[n.detail.event]=n.detail.ts,n.detail.event){case"bundleRequested":u[o]=setTimeout(function(){a("UI never became interactive",{name:o,timeout:l})},l);break;case"bundleLoaded":d.bundleRequested&&(t=d.bundleLoaded-d.bundleRequested,s.push(i("download",o,t)));break;case"initializationStarted":break;case"initializationFinished":d.initializationStarted&&(t=d.initializationFinished-d.initializationStarted,s.push(i("initialization",o,t))),d.bundleRequested&&(t=d.initializationFinished-d.bundleRequested,s.push(i("initialized",o,t)));break;case"interactive":u[o]&&(clearTimeout(u[o]),delete u[o]),d.bundleRequested&&(t=d.interactive-d.bundleRequested,s.push(i("interactive",o,t)),t>c&&a("UI did not become interactive within threshold",{name:o,timings:s,threshold:c}));break;default:console.error("Unknown UnbounceUITimingEvent",n)}}}),"object"==typeof window.gon.javascript_uis&&Object.keys(window.gon.javascript_uis).forEach(function(e){var n=window.gon.javascript_uis[e];if(n.initialize="BUNDLE NOT LOADED",n.deferDownload)n.download=function(){return o(n)};else{var t=o(n);n.download=function(){return t}}})}();